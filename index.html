<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Integrating R with QGIS • RQGIS</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Integrating R with QGIS">
<meta property="og:description" content="Establishes an interface between R and 'QGIS', i.e. it allows
    the user to access 'QGIS' functionalities from the R console. It achieves this
    by using the 'QGIS' Python API via the command line. Hence, RQGIS extends R's
    statistical power by the incredible vast geo-functionality of 'QGIS' (including
    also 'GDAL', 'SAGA'- and 'GRASS'-GIS among other third-party providers).
    This in turn creates a powerful environment for advanced and innovative
    (geo-)statistical geocomputing. 'QGIS' is licensed under GPL version 2 or
    greater and is available from &lt;http://www.qgis.org/en/site/&gt;.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">RQGIS</a>
        <span class="label label-info" data-toggle="tooltip" data-placement="bottom" title="Version">1.0.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/install_guide.html">(R)QGIS installation guide for Windows, Mac &amp; Linux</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jannes-m/RQGIS">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="general" class="section level4">
<h4 class="hasAnchor">
<a href="#general" class="anchor"></a>General</h4>

<p><a href="https://travis-ci.org/jannes-m/RQGIS"><img src="https://badges.herokuapp.com/travis/jannes-m/RQGIS?branch=master&amp;env=linux=true&amp;label=Linux" alt="linux=true Status"></a> <a href="https://travis-ci.org/jannes-m/RQGIS"><img src="https://badges.herokuapp.com/travis/jannes-m/RQGIS?branch=master&amp;env=mac=true&amp;label=macOS" alt="mac=true Status"></a> <a href="https://ci.appveyor.com/project/jannes-m/rqgis/branch/master"><img src="https://ci.appveyor.com/api/projects/status/ftk03jo1933vm3we/branch/master?svg=true" alt="Build status"></a> <a href="https://codecov.io/gh/jannes-m/RQGIS"><img src="https://codecov.io/gh/jannes-m/RQGIS/branch/master/graph/badge.svg" alt="Coverage Status"></a></p>
</div>
<div id="cran" class="section level4">
<h4 class="hasAnchor">
<a href="#cran" class="anchor"></a>CRAN</h4>
<p><a href="http://cran.r-project.org/package=RQGIS"><img src="http://www.r-pkg.org/badges/version/RQGIS" alt="CRAN_Status_Badge"></a> <a href="http://www.r-pkg.org/pkg/RQGIS"><img src="http://cranlogs.r-pkg.org/badges/RQGIS?color=brightgreen" alt="Downloads"></a> <img src="http://cranlogs.r-pkg.org/badges/grand-total/RQGIS"></p>
<!-- C:\OSGeo4W64\bin\python-qgis -> opens Python!!
/usr/share/qgis/python/plugins/processing-->
</div>
<div id="attention-rqgis-users" class="section level3">
<h3 class="hasAnchor">
<a href="#attention-rqgis-users" class="anchor"></a>Attention RQGIS users</h3>
<p>Please use the QGIS LTR <strong>2.18</strong> since RQGIS so far does not support QGIS 3!!</p>
<p>RQGIS establishes an interface between R and QGIS, i.e. it allows the user to access QGIS functionalities from within R. It achieves this by establishing a tunnel to the Python QGIS API via the <a href="https://github.com/rstudio/reticulate">reticulate-package</a>. This provides the user with an extensive suite of GIS functions, since QGIS allows you to call native as well as third-party algorithms via its processing framework (see also <a href="https://docs.qgis.org/2.14/en/docs/user_manual/processing/index.html" class="uri">https://docs.qgis.org/2.14/en/docs/user_manual/processing/index.html</a>). Third-party providers include among others GDAL, GRASS GIS, SAGA GIS, the Orfeo Toolbox, TauDEM and tools for LiDAR data. RQGIS brings you this incredibly powerful geoprocessing environment to the R console.</p>
<p>Please check also out our paper presenting <strong>RQGIS</strong> in detail:</p>
<div style="text-align:center">
<p><a href="https://rjournal.github.io/archive/2017/RJ-2017-067/RJ-2017-067.pdf">https://rjournal.github.io/archive/2017/RJ-2017-067/RJ-2017-067.pdf</a></p>
</div>
<p align="center">
<img src="https://raw.githubusercontent.com/jannes-m/RQGIS/master/figures/r_qgis_puzzle.png" width="40%"></p>
<p>The main advantages of RQGIS are:</p>
<ol style="list-style-type: decimal">
<li>It provides access to QGIS functionalities. Thereby, it calls Python QGIS API but R users can stay in their programming environment of choice without having to touch Python.</li>
<li>It offers a broad suite of geoalgorithms making it possible to solve most GIS problems.</li>
<li>R users can use just one package (RQGIS) instead of using RSAGA and rgrass7 to access SAGA and GRASS functions. This, however, does not mean that RSAGA and rgrass7 are obsolete since both packages offer various other advantages. For instance, RSAGA provides many user-friendly and ready-to-use GIS functions such as <code>rsaga.slope.asp.curv</code> and <code>multi.focal.function</code>.</li>
</ol>
</div>
<div id="installation" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1></div>
<div id="package-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#package-installation" class="anchor"></a>Package installation</h2>
<p>In order to run RQGIS properly, you need to download various third-party software packages. Our vignette should help you with the download and installation procedures on various platforms (Windows, Linux, Mac OSX). To access it, use <code><a href="articles/install_guide.html">vignette("install_guide", package = "RQGIS")</a></code>.</p>
<p>You can install:</p>
<ul>
<li>the latest released version from CRAN with:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"RQGIS"</span>)</a></code></pre></div>
<ul>
<li>the latest RQGIS development version from Github with:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"jannes-m/RQGIS"</span>)</a></code></pre></div>
</div>
</div>
<div id="rqgis-usage" class="section level1">
<h1 class="hasAnchor">
<a href="#rqgis-usage" class="anchor"></a>RQGIS usage</h1>
<p>Subsequently, we will show you a typical workflow of how to use RQGIS. Basically, we will follow the steps also described in the <a href="https://docs.qgis.org/2.14/en/docs/user_manual/processing/console.html">QGIS documentation</a>. In our first and very simple example we simply would like to retrieve the centroid coordinates of a spatial polygon object. First off, we will download the administrative areas of Germany using the raster package.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># attach packages</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">library</span>(<span class="st">"raster"</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">library</span>(<span class="st">"rgdal"</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co"># download German administrative areas </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">ger &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/getData">getData</a></span>(<span class="dt">name =</span> <span class="st">"GADM"</span>, <span class="dt">country =</span> <span class="st">"DEU"</span>, <span class="dt">level =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co"># ger is of class "SpatialPolygonsDataFrame"</span></a></code></pre></div>
<p>Now that we have a spatial object, we can move on to using RQGIS. First of all, we need to specify all the paths necessary to run the QGIS-API. Fortunately, <code>set_env</code> does this for us (assuming that QGIS and all necessary dependencies were installed correctly). The only thing we need to do is: specify the root path to the QGIS-installation. If you do not specify a path, <code>set_env</code> tries to find the OSGeo4W-installation first in the ‘C:/OSGeo4W’-folders. If this is unsuccessful, it will search your C: drive though this might take a while. If you are running RQGIS under Linux or on a Mac, <code>set_env</code> assumes that your root path is “/usr” and “/applications/QGIS.app/Contents”, respectively. Please note, that most of the RQGIS functions, you are likely to work with (such as <code>find_algorithms</code>, <code>get_args_man</code> and <code>run_qgis</code>), require the output list (as returned by <code>set_env</code>) containing the paths to the various installations necessary to run QGIS from within R. This is why, <code>set_env</code> caches its result in a temporary folder, and loads it back into R when called again (to overwrite an existing cache, set parameter <code>new</code> to <code>TRUE</code>).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># attach RQGIS</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">library</span>(<span class="st">"RQGIS"</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># set the environment, i.e. specify all the paths necessary to run QGIS from </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co"># within R</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw"><a href="reference/set_env.html">set_env</a></span>()</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co"># under Windows set_env would be much faster if you specify the root path:</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co"># set_env("C:/OSGeo4W~1")</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## $root</a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## [1] "C:\\OSGeo4W64"</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">##</a>
<a class="sourceLine" id="cb4-14" data-line-number="14">## $qgis_prefix_path</a>
<a class="sourceLine" id="cb4-15" data-line-number="15">## [1] "C:\\OSGeo4W64\\apps\\qgis-ltr"</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">##</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## $python_plugins</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## [1] "C:\\OSGeo4W64\\apps\\qgis-ltr\\python\\plugins"</a></code></pre></div>
<p>Secondly, we would like to find out how the function in QGIS is called which gives us the centroids of a polygon shapefile. To do so, we use <code>find_algorithms</code>. Here, we look for a geoalgorithm that contains the words “polygon” and “centroid”.<br>
Note that you can use regular expressions.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">library</span>(<span class="st">"RQGIS"</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="reference/find_algorithms.html">find_algorithms</a></span>(<span class="dt">search_term =</span> <span class="st">"([Pp]olygon)(centroid)"</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">## [1] "Polygon centroids------------------------------------&gt;qgis:polygoncentroids"</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">## [2] "Polygon centroids------------------------------------&gt;saga:polygoncentroids"</a></code></pre></div>
<p>This gives us two functions we could use. Here, we’ll choose the QGIS function named <code>qgis:polygoncentroids</code>. Subsequently, we would like to know how we can use it, i.e. which function parameters we need to specify.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="reference/get_usage.html">get_usage</a></span>(<span class="dt">alg =</span> <span class="st">"qgis:polygoncentroids"</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">## ALGORITHM: Polygon centroids</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">##  INPUT_LAYER &lt;ParameterVector&gt;</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">##  OUTPUT_LAYER &lt;OutputVector&gt;</a></code></pre></div>
<p>Consequently <code>qgis:polygoncentroids</code> only expects a parameter called <code>INPUT_LAYER</code>, i.e. the path to a polygon shapefile whose centroid coordinates we wish to extract, and a parameter called <code>OUTPUT_LAYER</code>, i.e. the path to the output shapefile. Since it would be tedious to specify manually each and every function argument, especially if a function has more than two or three arguments, we have written a convenience function, named <code>get_args_man</code>, that retrieves all function arguments and respective default values for a given GIS function. It returns these values in the form of a list. If a function argument lets you choose between several options (drop-down menu in a GUI), setting <code>get_arg_man</code>’s <code>options</code>-argument to <code>TRUE</code> makes sure that the first option will be selected (QGIS GUI behavior). For example, <code>qgis:addfieldtoattributestable</code> has three options for the <code>FIELD_TYPE</code>-parameter, namely integer, float and string. Setting <code>options</code> to <code>TRUE</code> means that the field type of your new column will be of type integer.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">params &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_args_man.html">get_args_man</a></span>(<span class="dt">alg =</span> <span class="st">"qgis:polygoncentroids"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">params</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## $INPUT_LAYER</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## [1] "None"</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## </a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## $OUTPUT_LAYER</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## [1] "None"</a></code></pre></div>
<p>In our case, <code>qgis:polygoncentroids</code> has only two function arguments and no default values. Naturally, we need to specify manually our input and output layer. We can do so in two ways. Either we use directly our parameter-argument list…</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">params<span class="op">$</span>INPUT_LAYER  &lt;-<span class="st"> </span>ger</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">params<span class="op">$</span>OUTPUT_LAYER &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">"ger_coords.shp"</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">out &lt;-<span class="st"> </span><span class="kw"><a href="reference/run_qgis.html">run_qgis</a></span>(<span class="dt">alg =</span> <span class="st">"qgis:polygoncentroids"</span>,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">                <span class="dt">params =</span> params,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">                <span class="dt">load_output =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## $OUTPUT_LAYER</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## [1] "C:\\Users\\pi37pat\\AppData\\Local\\Temp\\Rtmpeil4bS/ger_coords.shp"</a></code></pre></div>
<p>… or we can use R named arguments in <code>run_qgis</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">out &lt;-<span class="st"> </span><span class="kw"><a href="reference/run_qgis.html">run_qgis</a></span>(<span class="dt">alg =</span> <span class="st">"qgis:polygoncentroids"</span>,</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">                <span class="dt">INPUT_LAYER =</span> ger,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">                <span class="dt">OUTPUT_LAYER =</span> <span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">"ger_coords.shp"</span>),</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">                <span class="dt">load_output =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## $OUTPUT_LAYER</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## [1] "C:\\Users\\pi37pat\\AppData\\Local\\Temp\\Rtmpeil4bS/ger_coords.shp"</a></code></pre></div>
<p>Please note that our <code>INPUT_LAYER</code> is a spatial object residing in R’s global environment. Of course, you can also use a path to specify <code>INPUT_LAYER</code> (e.g. “ger.shp”) which is the better option if your data is somewhere stored on your hard drive. Finally, <code>run_qgis</code> calls the QGIS API to run the specified geoalgorithm with the corresponding function arguments. Since we set <code>load_output</code> to <code>TRUE</code>, <code>run_qgis</code> automatically loads the QGIS output back into R (an <code>sf</code>-object in the case of vector data and a <code>raster</code>-object in the case of raster data). Naturally, we would like to check if the result meets our expectations.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># first, plot the federal states of Germany</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(ger)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co"># next plot the centroids created by QGIS</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw"><a href="http://www.rdocumentation.org/packages/raster/topics/plot">plot</a></span>(out<span class="op">$</span>geometry, <span class="dt">pch =</span> <span class="dv">21</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">bg =</span> <span class="st">"lightblue"</span>, <span class="dt">col =</span> <span class="st">"black"</span>)</a></code></pre></div>
<p align="center">
<img src="https://raw.githubusercontent.com/jannes-m/RQGIS/master/https://raw.githubusercontent.com/jannes-m/RQGIS/master/figures/10_plot_ger.png" width="60%"></p>
<p>Of course, this is a very simple example. We could have achieved the same using <code><a href="http://www.rdocumentation.org/packages/sp/topics/coordinates">sp::coordinates()</a></code>. For a more detailed introduction to <strong>RQGIS</strong> and more complex examples have a look at our paper:</p>
<div style="text-align:center">
<p><a href="https://rjournal.github.io/archive/2017/RJ-2017-067/RJ-2017-067.pdf">https://rjournal.github.io/archive/2017/RJ-2017-067/RJ-2017-067.pdf</a></p>
</div>
</div>
<div id="advanced-topics" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-topics" class="anchor"></a>Advanced topics</h1>
<div id="calling-the-qgis-python-api" class="section level2">
<h2 class="hasAnchor">
<a href="#calling-the-qgis-python-api" class="anchor"></a>Calling the QGIS Python API</h2>
<p>Internally, <code>open_app</code> first sets all necessary paths (among others the path to the QGIS Python binary) to run QGIS, and secondly opens a QGIS application with the help of <a href="https://github.com/rstudio/reticulate">reticulate</a>. Please note that <code>open_app</code> establishes a tunnel to the QGIS Pyton API which can only be closed by starting a new R session (see <a href="https://github.com/rstudio/reticulate/issues/27" class="uri">https://github.com/rstudio/reticulate/issues/27</a>). On the one hand, this means that we only have to set up the Python environment once and consequently subsequent processing is faster. Additionally, you can use your own Python commands to customize RQGIS as you wish. On the other hand, it also means that once you have run the first RQGIS command interacting with the QGIS Python API (e.g., <code>find_algorithms</code>, <code>get_usage</code>, etc.), you have to stay with the chosen QGIS version for this session. For instance, if you are using QGIS 2.14.14 (<code>qgis_session_info</code>), and you would like to use the developer version QGIS 2.18.7, you have to restart R. Then you can call <code><a href="reference/set_env.html">set_env(dev = TRUE)</a></code> and <code><a href="reference/open_app.html">open_app()</a></code> to use the QGIS developer version.</p>
</div>
<div id="rqgis-modifications-v--2-16-2-18-1" class="section level2">
<h2 class="hasAnchor">
<a href="#rqgis-modifications-v--2-16-2-18-1" class="anchor"></a>(R)QGIS modifications (v. 2.16-2.18.1)</h2>
<p>If you would like to use QGIS versions 2.16-2.18.1, you need to fix manually a Processing error in order to make RQGIS work. First, add one <code>import</code> statement (SilentProgress) to <code>../processing/gui/AlgorithmExecutor.py</code>. Secondly replace <code>python alg.execute(progress)</code> by <code>python alg.execute(progress or SilentProgress())</code>:</p>
<p align="center">
<img src="https://raw.githubusercontent.com/jannes-m/RQGIS/master/figures/rewrite_algexecutor.PNG" width="80%"></p>
<p>The QGIS core team fixed this bug, and starting with QGIS 2.18.2 this manual adjustment is no longer necessary (see also this <a href="http://gis.stackexchange.com/questions/204321/qgis-2-16-processing-runalg-fails-when-run-outside-of-qgis-in-a-custom-applicat">post</a>). However, we would strongly recommend to either use the QGIS LTR (2.14) or QGIS &gt;= 2.18.2.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=RQGIS">https://​cloud.r-project.org/​package=RQGIS</a>
</li>
<li>Browse source code at <br><a href="https://github.com/jannes-m/RQGIS">https://​github.com/​jannes-m/​RQGIS</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jannes-m/RQGIS/issues">https://​github.com/​jannes-m/​RQGIS/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing RQGIS</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jannes Muenchow <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7834-4717" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li>Patrick Schratz <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-0748-6624" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://cran.r-project.org/"><img src="https://img.shields.io/badge/R%3E%3D-3.2.0-6666ff.svg" alt="minimal R version"></a></li>
<li><a href="/commits/master"><img src="https://img.shields.io/badge/last%20change-2018--10--25-yellowgreen.svg" alt="Last-changedate"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jannes Muenchow, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
